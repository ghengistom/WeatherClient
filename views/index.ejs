<!DOCTYPE html>
<html>
  <head>
    <title>The Weather Station</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="/javascripts/graphLogic.js" type="text/javascript"></script>
    
  </head>
  <body>
    <h1>Temperature of Ethereum Mining Rig</h1>
    <p>Mining Rig Temperature versus Time</p>

    <div id="tester" style="width:800px;height:400px;"></div>
    <h2>Current Temperature <br></h2>
    <p>
        
        <span id="displayTemp">Temp!</div>
    </p>
    
    <!-- <script>
      //make server get request to pi
      $.get( "http://47.153.171.2:9000/gethistory", function(data) {

            results = data;

            var dates = [];
            var temps = [];
            for(var i=0; i < results.length; ++i) {
            
            dates.push(results[i][0]);
            temps.push(results[i][1]);
      }
        TESTER = document.getElementById('tester');
        Plotly.plot( TESTER, [{
        x: dates,
        y: temps }], {
        margin: { t: 0 } } );
      })     
       </script>-->



<input id="testbutton" type="button" value="Test" />
<p id="results">results appended here: </p>

<script
src="https://code.jquery.com/jquery-3.3.1.min.js"
integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function() {
  $("#testbutton").click(function() {
      $.ajax({
          url: 'http://47.153.171.2:9000/gettemp',
          dataType: 'json',
          success: function(data) {
              //$("#results").append('all good');
              //alert(data);
              $("span").appendTo(displayTemp).append(data);
              
          },
           error: function() {
              $("#results").append("error");
              alert('error');
          }
      });
  });
});


</script>




  </body>
</html>
